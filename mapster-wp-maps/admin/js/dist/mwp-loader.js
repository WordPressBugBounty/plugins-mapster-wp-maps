!function(e){if(window.mapster_params.public)(a=".mapster-wp-maps",new Promise((e=>{if(document.querySelector(a))return e(document.querySelector(a));const t=new MutationObserver((i=>{if(document.querySelector(a)){e(document.querySelector(a));t.disconnect()}}));t.observe(document.body,{childList:!0,subtree:!0})}))).then((t=>{let a=!1,i=e(document).scrollTop();e(".mapster-wp-maps").length>15&&(a=!0);e(".mapster-wp-maps").each((function(){const t=e(this).attr("id").replace("mapster-wp-maps-",""),s=""!==e(this).data("single_feature_id")&&e(this).data("single_feature_id"),p=""!==e(this).data("feature_ids")&&e(this).data("feature_ids");if(a){let o=!1;const r=e(window).height(),c=e(this).offset().top;n();e(document).scroll((()=>{i=e(document).scrollTop();n()}));function n(){if(i-1.5*r<c&&i+1.5*r>c&&!o){o=new MapsterMap(t,window.mapster_params.public,s,p);o.init()}else if((i-1.5*r>c||i+1.5*r<c)&&o){o.destroy();o=!1}}}else{new MapsterMap(t,window.mapster_params.public,s,p).init()}}))}));else{let i="Publish this post to generate an embed code.";const s=new URLSearchParams(window.location.search);if(s.has("post")){let l=window.mapster_params.directory.replace("/admin/","/admin/includes/mapster-embed-map.php");l=l+window.mapster_params.qd+"map_id="+s.get("post");i=`<iframe src="${l}" />`}let p="Publish this post to generate an listing code.";s.has("post")&&(p=`[mapster_listing_posts id="${s.get("post")}"]`);if(document.body.classList.contains("block-editor-page")){e("#mapster-wp-maps-preview").prependTo("#normal-sortables");e(".acf-field-625df5ebf4ecc .acf-input").text(i);e(".acf-field-6507ba6e3053a .acf-input").text(p)}else{e("#mapster-wp-maps-preview").prependTo("#acf_after_title-sortables");e(".acf-field-625df5ebf4ecc .acf-input").text(i);e(".acf-field-6507ba6e3053a .acf-input").text(p)}if(s.has("post")){let m=`\n        [mapster_wp_map_submit map_id="${s.get("post")}" type="create_point"]<br />\n        [mapster_wp_map_submit map_id="${s.get("post")}" type="edit_point" button_text="Edit Point" header_text="Edit Point"]\n      `;e(".acf-field-62bf86b094491 .acf-input").append(m)}let n=acf.getFields().length,o=acf.getFields().filter((e=>"accordion"===e.data.type)).length;n-=o;let r=5,c=0,d=0;function t(e){"select"!==e&&(c+=1);if(c===n&&r===d){new MapsterMap("map",window.mapster_params.public,!1).init()}}acf.add_action("ready_field",t);acf.addAction("select2_init",(function(e,a,i,s){d+=1;t("select")}))}var a}(jQuery);